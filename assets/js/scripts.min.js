/*! matt-watson-theme 20-03-2014 */
function commodity_set_decimal_place(a,b,c){!jQuery.isNumeric(a.val())||a.val()<0?a.val(2==b?"0.00":0):2!=b||-1!==a.val().toString().indexOf(".")&&2==a.val().toString().split(".")[1].length?0==b&&a.val().toString().indexOf(".")>-1&&a.val(parseFloat(a.val()).toFixed(0)):a.val(parseFloat(a.val()).toFixed(2)),a.val().toString().indexOf(".")>-1&&0==a.val().toString().split(".")[0].length&&a.val("0"+a.val().toString()),c&&a.val()>100&&a.val(100)}var commodity_any_input=jQuery(".commodity_cost input"),commodity_vat_global_rate=commodity_object.vat_rate,commodity_cost=jQuery("#commodity_price"),commodity_discount=jQuery("#commodity_discount"),commodity_discount_percent=jQuery("#commodity_discount_percent"),commodity_discount_percent_old=0,commodity_quantity=jQuery("#commodity_quantity"),commodity_shipping=jQuery("#commodity_shipping"),commodity_shipping_total=jQuery("#commodity_shipping_total"),commodity_shipping_vat_rate=jQuery("#commodity_shipping_vat_rate"),commodity_total=jQuery("#commodity_total"),commodity_vat_rate=jQuery("#commodity_vat_rate"),commodity_vat=jQuery("#commodity_vat"),commodity_discount_any_input=jQuery(".commodity_discounts input"),commodity_discount_name=jQuery("#commodity_discount_name"),commodity_discount_code=jQuery("#commodity_discount_code"),commodity_discount_type=jQuery("#commodity_discount_type"),commodity_discount_discount=jQuery("#commodity_discount_discount"),commodity_discount_expires=jQuery("#commodity_discount_expires"),commodity_disount_add=jQuery("#commodity_discount_add"),commodity_options=jQuery(".commodity_options input"),commodity_global_vat_rate=jQuery("#commodity_global_vat_rate");commodity_disount_add.prop("disabled",!0),commodity_any_input.bind("focus",function(){commodity_discount_percent_old=commodity_discount_percent.val()}),commodity_any_input.bind("blur",function(){commodity_set_decimal_place(commodity_cost,2,!1),commodity_set_decimal_place(commodity_discount,2,!1),commodity_set_decimal_place(commodity_discount_percent,2,!0),commodity_set_decimal_place(commodity_quantity,0,!1),commodity_set_decimal_place(commodity_shipping,2,!1),commodity_set_decimal_place(commodity_shipping_total,2,!1),commodity_set_decimal_place(commodity_shipping_vat_rate,2,!0),commodity_set_decimal_place(commodity_total,2,!1),commodity_set_decimal_place(commodity_vat_rate,2,!0),commodity_set_decimal_place(commodity_vat,2,!1),jQuery(this).attr("id")==commodity_cost.attr("id")?0!=commodity_cost.val()?0!=commodity_discount.val()?(commodity_discount_percent.val(commodity_discount.val()/commodity_cost.val()*100),commodity_set_decimal_place(commodity_discount_percent,2,!0)):0!=commodity_discount_percent.val()?(commodity_discount.val(commodity_cost.val()*commodity_discount_percent.val()/100),commodity_set_decimal_place(commodity_discount,2,!1)):(commodity_discount.val("0.00"),commodity_discount_percent.val("0.00")):(commodity_discount.val("0.00"),commodity_discount_percent.val("0.00")):jQuery(this).attr("id")==commodity_discount.attr("id")?0!=commodity_cost.val()&&(commodity_discount.val()>commodity_cost.val()&&commodity_discount.val("0.00"),commodity_discount_percent.val(commodity_discount.val()/commodity_cost.val()*100),commodity_set_decimal_place(commodity_discount_percent,2,!0)):jQuery(this).attr("id")==commodity_discount_percent.attr("id")&&0!=commodity_cost.val()&&commodity_discount_percent.val()!=commodity_discount_percent_old&&(commodity_discount.val(commodity_cost.val()*commodity_discount_percent.val()/100),commodity_set_decimal_place(commodity_discount,2,!1)),0!=commodity_cost.val()?0!=commodity_vat_rate.val()?(commodity_vat.val((commodity_cost.val()-commodity_discount.val())*commodity_vat_rate.val()/100),commodity_set_decimal_place(commodity_vat,2,!1)):commodity_vat.val("0.00"):commodity_vat.val("0.00"),0!=commodity_shipping.val()&&(0!=commodity_shipping_vat_rate.val()?(commodity_shipping_total.val(commodity_shipping.val()*commodity_shipping_vat_rate.val()/100),commodity_shipping_total.val(parseFloat(commodity_shipping_total.val())+parseFloat(commodity_shipping.val())),commodity_set_decimal_place(commodity_shipping_total,2,!1)):commodity_shipping_total.val(commodity_shipping.val())),commodity_total.val(parseFloat(commodity_cost.val())-parseFloat(commodity_discount.val())+parseFloat(commodity_vat.val())+parseFloat(commodity_shipping_total.val())),commodity_set_decimal_place(commodity_total,2,!1)}),commodity_discount_any_input.bind("blur",function(){"percent"==commodity_discount_type.val()?commodity_set_decimal_place(commodity_discount_discount,2,!0):commodity_set_decimal_place(commodity_discount_discount,2,!1),jQuery(this).attr("id")==commodity_discount_code.attr("id")&&(commodity_discount_code.val(commodity_discount_code.val().toUpperCase().replace(/[^0-9A-Z-_]/g,"")),commodity_discount_code.val().length>8&&commodity_discount_code.val(commodity_discount_code.val().substr(0,8))),jQuery(this).attr("id")==commodity_discount_name.attr("id")&&(commodity_discount_name.val(jQuery.trim(commodity_discount_name.val().replace(/[^0-9a-zA-Z\s]/g,"").replace(/\s{2,}/g," "))),commodity_discount_name.val().length>240&&commodity_discount_name.val(commodity_discount_name.val().substr(0,240))),null!=commodity_discount_name.val()&&""!==commodity_discount_name.val()&&null!=commodity_discount_code.val()&&""!==commodity_discount_code.val()&&commodity_discount_discount.val()>0?commodity_disount_add.prop("disabled",!1):commodity_disount_add.prop("disabled",!0)}),commodity_options.bind("blur",function(){commodity_set_decimal_place(commodity_global_vat_rate,2,!0)});